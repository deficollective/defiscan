---
protocol: "Spark"
website: "https://spark.fi"
x: "https://x.com/sparkdotfi"
github: ["https://github.com/sparkdotfi"]
defillama_slug: ["spark"]
chain: "Ethereum"
stage: 0
reasons: []
risks: ["L", "L", "H", "H", "H"]
author: ["mmilien_"]
submission_date: "1970-01-01"
publish_date: "1970-01-01"
update_date: "1970-01-01"
---

# Summary

Add a summary of the protocols. What is it? What does it do? etc.

# Overview

## Chain

See http://defiscan.info/learn-more#chain for more guidance.

> Chain score: Low

## Upgradeability

In the upgradability section & risk we address bytecode upgrades and parameter changes that are permissioned.

We wrote a section explaining the Upgradeability Risk in our framework here: See http://defiscan.info/learn-more#upgradability

For some practical guidance follow this steps. It will help you in writing a nice report:

1. Run the [permission scanner](https://github.com/deficollective/permission-scanner)
2. Fill in all the permissioned functions in the table (`## Permissions`)
   - Remember: Each function with a permission needs to be considered when determining the risk on Upgradability
3. Get a mechanistic and precise understanding of each permissioned function
4. Assess impact for each function, look out for
   - loss/blocking of user funds
   - loss of unclaimed yield
   - change expected behavior significantly (blacklisting/kyc/fees/...)
5. Write the impact column based on your understanding
   - A good tipp when writing the impact column below, think of least 2,3 sentences:
   1. First sentence: what it does technically, e.g "It assigns a new address to the owner variable"
   2. Second: what is the impact within the system, e.g "The owner is permissioned to raise fees"
   3. Third: Imagine faulty or malicious action, e.g "The malicious owner could raise fees to 100%, redirecting all future yield.
6. Summarise and abstract away technical details in this section here (`## Upgradeability`)

## Autonomy

Spark has a core dependency in Sky, a stage 0 protocol.

Dependy on USDC: USDC is deployed behind a proxy, and its implementation can be upgraded by an admin.
CCTP (Cricle's Cross-Chain Transfer Protocol): relies on a set of centralized offchain signers to provide the bridging attestation.

## Exit Window

See http://defiscan.info/learn-more#exit-window for more guidance.

## Accessibility

Spark has a main open-source frontend at [spark.fi](https://app.spark.fi). The code is open and there are instruction to run the page locally as a developer. There are no dedicated instructions for self-hosting. Direct interaction with contract is not straight forward due to the high amount of contracts.

> Accesibility score: High

# Technical Analysis

## Governance and Sky dependancy

## Contracts

The list of deployed contracts and their addresses is available in spark's [addresses registry](https://github.com/sparkdotfi/spark-address-registry/blob/master/src/Ethereum.sol).

| Contract Name                                                      | Address                                                                                                               |
| ------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------- |
| SubProxy ("Spark Proxy")                                           | [0x3300f198988e4C9C63F75dF86De36421f06af8c4](https://etherscan.io/address/0x3300f198988e4C9C63F75dF86De36421f06af8c4) |
| SparkRewards                                                       | [0xbaf21A27622Db71041Bd336a573DDEdC8eB65122](https://etherscan.io/address/0xbaf21A27622Db71041Bd336a573DDEdC8eB65122) |
| AllocatorBuffer                                                    | [0xc395D150e71378B47A1b8E9de0c1a83b75a08324](https://etherscan.io/address/0xc395D150e71378B47A1b8E9de0c1a83b75a08324) |
| AllocatorOracle                                                    | [0xc7B91C401C02B73CBdF424dFaaa60950d5040dB7](https://etherscan.io/address/0xc7B91C401C02B73CBdF424dFaaa60950d5040dB7) |
| AllocatorRegistry                                                  | [0xCdCFA95343DA7821fdD01dc4d0AeDA958051bB3B](https://etherscan.io/address/0xCdCFA95343DA7821fdD01dc4d0AeDA958051bB3B) |
| AllocatorRoles                                                     | [0x9A865A710399cea85dbD9144b7a09C889e94E803](https://etherscan.io/address/0x9A865A710399cea85dbD9144b7a09C889e94E803) |
| AllocatorVault                                                     | [0x691a6c29e9e96dd897718305427Ad5D534db16BA](https://etherscan.io/address/0x691a6c29e9e96dd897718305427Ad5D534db16BA) |
| MainnetController (ALM)                                            | [0x5cf73FDb7057E436A6eEaDFAd27E45E7ab6E431e](https://etherscan.io/address/0x5cf73FDb7057E436A6eEaDFAd27E45E7ab6E431e) |
| Proxy (ALM)                                                        | [0x1601843c5E9bC251A3272907010AFa41Fa18347E](https://etherscan.io/address/0x1601843c5E9bC251A3272907010AFa41Fa18347E) |
| RateLimits (ALM)                                                   | [0x7A5FD5cf045e010e62147F065cEAe59e5344b188](https://etherscan.io/address/0x7A5FD5cf045e010e62147F065cEAe59e5344b188) |
| SafeProxy (Freezer ALM)                                            | [0x90D8c80C028B4C09C0d8dcAab9bbB057F0513431](https://etherscan.io/address/0x90D8c80C028B4C09C0d8dcAab9bbB057F0513431) |
| SafeProxy (Relayer ALM)                                            | [0x8a25A24EDE9482C4Fc0738F99611BE58F1c839AB](https://etherscan.io/address/0x8a25A24EDE9482C4Fc0738F99611BE58F1c839AB) |
| AaveOracle                                                         | [0x8105f69D9C41644c6A0803fDA7D03Aa70996cFD9](https://etherscan.io/address/0x8105f69D9C41644c6A0803fDA7D03Aa70996cFD9) |
| ACLManager                                                         | [0xdA135Cd78A086025BcdC87B038a1C462032b510C](https://etherscan.io/address/0xdA135Cd78A086025BcdC87B038a1C462032b510C) |
| InitializableAdminUpgradeabilityProxy (DAI Treasury / Collector)   | [0x856900aa78e856a5df1a2665eE3a66b2487cD68f](https://etherscan.io/address/0x856900aa78e856a5df1a2665eE3a66b2487cD68f) |
| EmissionManager                                                    | [0xf09e48dd4CA8e76F63a57ADd428bB06fee7932a4](https://etherscan.io/address/0xf09e48dd4CA8e76F63a57ADd428bB06fee7932a4) |
| InitializableAdminUpgradeabilityProxy (Rewards Controller)         | [0x4370D3b6C9588E02ce9D22e684387859c7Ff5b34](https://etherscan.io/address/0x4370D3b6C9588E02ce9D22e684387859c7Ff5b34) |
| InitializableImmutableAdminUpgradeabilityProxy (Pool)              | [0xC13e21B648A5Ee794902342038FF3aDAB66BE987](https://etherscan.io/address/0xC13e21B648A5Ee794902342038FF3aDAB66BE987) |
| PoolAddressesProvider                                              | [0x02C3eA4e34C0cBd694D2adFa2c690EECbC1793eE](https://etherscan.io/address/0x02C3eA4e34C0cBd694D2adFa2c690EECbC1793eE) |
| PoolAddressesProviderRegistry                                      | [0x03cFa0C4622FF84E50E75062683F44c9587e6Cc1](https://etherscan.io/address/0x03cFa0C4622FF84E50E75062683F44c9587e6Cc1) |
| InitializableImmutableAdminUpgradeabilityProxy (Pool Configurator) | [0x542DBa469bdE58FAeE189ffB60C6b49CE60E0738](https://etherscan.io/address/0x542DBa469bdE58FAeE189ffB60C6b49CE60E0738) |
| InitializableAdminUpgradeabilityProxy (Treasury / Collector)       | [0xb137E7d16564c81ae2b0C8ee6B55De81dd46ECe5](https://etherscan.io/address/0xb137E7d16564c81ae2b0C8ee6B55De81dd46ECe5) |
| CollectorController                                                | [0x92eF091C5a1E01b3CE1ba0D0150C84412d818F7a](https://etherscan.io/address/0x92eF091C5a1E01b3CE1ba0D0150C84412d818F7a) |
| WrappedTokenGatewayV3                                              | [0xBD7D6a9ad7865463DE44B05F04559f65e3B11704](https://etherscan.io/address/0xBD7D6a9ad7865463DE44B05F04559f65e3B11704) |
| CapAutomator                                                       | [0x2276f52afba7Cf2525fd0a050DF464AC8532d0ef](https://etherscan.io/address/0x2276f52afba7Cf2525fd0a050DF464AC8532d0ef) |
| SparkLendFreezerMom                                                | [0x237e3985dD7E373F2ec878EC1Ac48A228Cf2e7a3](https://etherscan.io/address/0x237e3985dD7E373F2ec878EC1Ac48A228Cf2e7a3) |
| KillSwitchOracle                                                   | [0x909A86f78e1cdEd68F9c2Fe2c9CD922c401abe82](https://etherscan.io/address/0x909A86f78e1cdEd68F9c2Fe2c9CD922c401abe82) |
| AToken (Impl)                                                      | [0x6175ddEc3B9b38c88157C10A01ed4A3fa8639cC6](https://etherscan.io/address/0x6175ddEc3B9b38c88157C10A01ed4A3fa8639cC6) |
| AaveV3ConfigEngine                                                 | [0x3254F7cd0565aA67eEdC86c2fB608BE48d5cCd78](https://etherscan.io/address/0x3254F7cd0565aA67eEdC86c2fB608BE48d5cCd78) |
| ProxyAdmin                                                         | [0x883A82BDd3d07ae6ACfD151020faD350df25087e](https://etherscan.io/address/0x883A82BDd3d07ae6ACfD151020faD350df25087e) |
| RATES_FACTORY                                                      | [0xfE57e187EF6285e90d7049e6a21571aa47cF11a2](https://etherscan.io/address/0xfE57e187EF6285e90d7049e6a21571aa47cF11a2) |
| TRANSPARENT_PROXY_FACTORY                                          | [0x777803CbDD89D5D5Bc1DdD2151B51b0B07F6bf37](https://etherscan.io/address/0x777803CbDD89D5D5Bc1DdD2151B51b0B07F6bf37) |
| AaveProtocolDataProvider                                           | [0xFc21d6d146E6086B8359705C8b28512a983db0cb](https://etherscan.io/address/0xFc21d6d146E6086B8359705C8b28512a983db0cb) |
| UiIncentiveDataProviderV3                                          | [0xA7F8A757C4f7696c015B595F51B2901AC0121B18](https://etherscan.io/address/0xA7F8A757C4f7696c015B595F51B2901AC0121B18) |
| UiPoolDataProviderV3                                               | [0xF028c2F4b19898718fD0F77b9b881CbfdAa5e8Bb](https://etherscan.io/address/0xF028c2F4b19898718fD0F77b9b881CbfdAa5e8Bb) |
| WalletBalanceProvider                                              | [0xd2AeF86F51F92E8e49F42454c287AE4879D1BeDc](https://etherscan.io/address/0xd2AeF86F51F92E8e49F42454c287AE4879D1BeDc) |
| BorrowLogic                                                        | [0x4662C88C542F0954F8CccCDE4542eEc32d7E7e9a](https://etherscan.io/address/0x4662C88C542F0954F8CccCDE4542eEc32d7E7e9a) |
| BridgeLogic                                                        | [0x2C54924711E479E639032704146b865E12f0C6D1](https://etherscan.io/address/0x2C54924711E479E639032704146b865E12f0C6D1) |
| EmodeLogic                                                         | [0x2Ad00613A66D71Ff2B0607fB3C4632C47a50DADe](https://etherscan.io/address/0x2Ad00613A66D71Ff2B0607fB3C4632C47a50DADe) |
| FlashLoanLogic                                                     | [0x7f44e1c1dE70059D7cc483378BEFeE2a030CE247](https://etherscan.io/address/0x7f44e1c1dE70059D7cc483378BEFeE2a030CE247) |
| LiquidationLogic                                                   | [0x6aEa92693C527bC2c7B3171C6f2598d67d619088](https://etherscan.io/address/0x6aEa92693C527bC2c7B3171C6f2598d67d619088) |
| PoolLogic                                                          | [0x1761a0f74032963B6Ad0774C5EBF4586c0bD7604](https://etherscan.io/address/0x1761a0f74032963B6Ad0774C5EBF4586c0bD7604) |
| SupplyLogic                                                        | [0x46256841e36b7557BB8e4c706beD38b17A9EB2c1](https://etherscan.io/address/0x46256841e36b7557BB8e4c706beD38b17A9EB2c1) |
| WalletBalanceProvider                                              | [0x52d298Ff9e77E71C2EB1992260520E7b15257d99](https://etherscan.io/address/0x52d298Ff9e77E71C2EB1992260520E7b15257d99) |

## Permission owners

| Name                                | Account                                                                                                               | Type         |
| ----------------------------------- | --------------------------------------------------------------------------------------------------------------------- | ------------ |
| DSPauseProxy (Sky DAO)              | [0xBE8E3e3618f7474F8cB1d074A26afFef007E98FB](https://etherscan.io/address/0xBE8E3e3618f7474F8cB1d074A26afFef007E98FB) | Contract     |
| ESM (Sky Emergency Shutdown Module) | [0x09e05fF6142F2f9de8B6B65855A1d56B6cfE4c58](https://etherscan.io/address/0x09e05fF6142F2f9de8B6B65855A1d56B6cfE4c58) | Contract     |
| SubProxy ("Spark Proxy")            | [0x3300f198988e4C9C63F75dF86De36421f06af8c4](https://etherscan.io/address/0x3300f198988e4C9C63F75dF86De36421f06af8c4) | Contract     |
| Proxy (ALM/Liquidity Management)    | [0x1601843c5E9bC251A3272907010AFa41Fa18347E](https://etherscan.io/address/0x1601843c5E9bC251A3272907010AFa41Fa18347E) | Contract     |
| SparkRewards                        | [0xF649956f43825d4d7295a50EDdBe1EDC814A3a83](https://etherscan.io/address/0xF649956f43825d4d7295a50EDdBe1EDC814A3a83) | MultiSig 2/3 |
| Freezer                             | [0x90D8c80C028B4C09C0d8dcAab9bbB057F0513431](https://etherscan.io/address/0x90D8c80C028B4C09C0d8dcAab9bbB057F0513431) | MultiSig 2/4 |
| Relayer                             | [0x8a25A24EDE9482C4Fc0738F99611BE58F1c839AB](https://etherscan.io/address/0x8a25A24EDE9482C4Fc0738F99611BE58F1c839AB) | MultiSig 2/3 |

MultiSigs:
address internal constant FREEZER_MULTISIG = 0x44efFc473e81632B12486866AA1678edbb7BEeC3; WRONG?
address internal constant SPARKLEND_REWARDS_MULTISIG = 0x8076807464DaC94Ac8Aa1f7aF31b58F73bD88A27;
address internal constant SPARK_REWARDS_MULTISIG = 0xF649956f43825d4d7295a50EDdBe1EDC814A3a83;

Checks to perform:

- Which proxies have ProxyAdmin as owner
- Roles in MainnetController
- Vaults interacted with in MainnetController?

Mainnetcontroller permissions: DEFAULT_ADMIN: SubProxy ("Spark Proxy")
FREEZER: Freezer (0x90D)
RELAYER:

## Permissions

| Contract Name                 | Function Name                  | Impact                                                                                                                                                                                                                                                                                                                                                      | Owner                                                                        |
| ----------------------------- | ------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |
| SubProxy ("Spark Proxy")      | rely                           | Grants admin privileges over the contract to a specific address. Admins can execute any code in the name of the contract (delegateCall to any address).                                                                                                                                                                                                     | DSPauseProxy (Sky DAO), ESM (Sky Shutdown)                                   |
| SubProxy ("Spark Proxy")      | deny                           | Revokes admin privileges over the contract to an address.                                                                                                                                                                                                                                                                                                   | DSPauseProxy (Sky DAO), ESM (Sky Shutdown)                                   |
| SubProxy ("Spark Proxy")      | exec                           | Executes any code using the current contract's state (delegateCall to any address).                                                                                                                                                                                                                                                                         | DSPauseProxy (Sky DAO), ESM (Sky Shutdown)                                   |
| SparkRewards                  | grantRole                      | Grants a role to a specific address, this could give permission to potentially any address over any function in the contract.                                                                                                                                                                                                                               | SparkRewards Multisig (MultiSig 2/3)                                         |
| SparkRewards                  | revokeRole                     | Revokes an address' access role in the contract.                                                                                                                                                                                                                                                                                                            | SparkRewards Multisig (MultiSig 2/3)                                         |
| SparkRewards                  | setWallet                      | Changes the `wallet` address, the address that holds the tokens to be distributed as rewards.                                                                                                                                                                                                                                                               | SparkRewards Multisig (MultiSig 2/3)                                         |
| SparkRewards                  | setMerkleRoot                  | Changes the reference merkle root used to verify claims. A wrong merkle root could prevent users from claiming their rewards.                                                                                                                                                                                                                               | SparkRewards Multisig (MultiSig 2/3)                                         |
| SparkRewards                  | setEpochClosed                 | Enables or disables claiming for a specific epoch. This could prevent users from claiming legitimate rewards if an epoch is closed early.                                                                                                                                                                                                                   | SparkRewards Multisig (MultiSig 2/3)                                         |
| AllocatorBuffer               | rely                           | Grants admin privileges over the contract. Admins can name other admins and approve tokens to be spent by an other contract. The contract's money is debt emitted by the spark `AllocatorVault` through the Sky ecosystem.                                                                                                                                  | SubProxy ("Spark Proxy")                                                     |
| AllocatorBuffer               | deny                           | Revokes admin privileges over the contract.                                                                                                                                                                                                                                                                                                                 | SubProxy ("Spark Proxy")                                                     |
| AllocatorBuffer               | approve                        | Approves a token from the buffer to be spent by another address. This buffer mainly holds `USDS`, debt emitted from the `AllocatorVault` throught the Sky ecosystem. A malicious approve could allow the drainage of all USDS from the buffer.                                                                                                              | SubProxy ("Spark Proxy")                                                     |
| AllocatorRegistry             | rely                           | Grants admin privileges over the contract. Admins can name other admins and change or add mappings from vault tags to addresses.                                                                                                                                                                                                                            | DSPauseProxy (Sky DAO)                                                       |
| AllocatorRegistry             | deny                           | Revokes admin privileges over the contract.                                                                                                                                                                                                                                                                                                                 | DSPauseProxy (Sky DAO)                                                       |
| AllocatorRegistry             | file                           | Adds or changes a mapping from a vault tag to its contract address. An admin could change the address to point to another contract. This could be abused if undetected but easily circumvent in other cases.                                                                                                                                                | DSPauseProxy (Sky DAO)                                                       |
| AllocatorRoles                | rely                           | Grants admin privileges over the contract to a specific address. Admins can grant admin privileges both over the contract or over collateral vaults and handle access control for vaults.                                                                                                                                                                   | DSPauseProxy (Sky DAO)                                                       |
| AllocatorRoles                | deny                           | Revokes admin permisisons over the contract.                                                                                                                                                                                                                                                                                                                | DSPauseProxy (Sky DAO)                                                       |
| AllocatorRoles                | setIlkAdmin                    | Sets the admin for a given collateral. The admin can grant roles and permissions over the corresponding vault.                                                                                                                                                                                                                                              | DSPauseProxy (Sky DAO)                                                       |
| AllocatorRoles                | setUserRole                    | Grants a role to a specific address. This can be used to grand fine-grained vault access to other addresses or contracts. Granting access to malicious addresses could be critical for the Spark Vault and the entire Sky ecosystem.                                                                                                                        | Admin of collateral type (SubProxy ("Spark Proxy") for AllocatorVault )      |
| AllocatorRoles                | setRoleAction                  | Sets the capabilities of a given role. This can be used to define the accesses on a vault for specific role holders. Granting access to malicious addresses could be critical for the Spark Vault and the entire Sky ecosystem.                                                                                                                             | Admin of collateral type (SubProxy ("Spark Proxy") for AllocatorVault )      |
| AllocatorVault                | rely                           | Grants admin privileges over the contract. Admins can name other admins, change the jug (interest rates) contract, and draw or wipe debt from the system. A malicious admin could draw excessive debt from Sky.                                                                                                                                             | ALMProxy, SubProxy ("Spark Proxy"), AllocatorRoles(no additional permisions) |
| AllocatorVault                | deny                           | Revokes admin privileges over the contract.                                                                                                                                                                                                                                                                                                                 | ALMProxy, SubProxy ("Spark Proxy"), AllocatorRoles(no additional permisions) |
| AllocatorVault                | file                           | Changes the jug contract which collects stability fees on the vault. This could be used to upgrade the Jug contract. A malicious actor might try to avoid fees by changing this contract.                                                                                                                                                                   | ALMProxy, SubProxy ("Spark Proxy"), AllocatorRoles(no additional permisions) |
| AllocatorVault                | draw                           | Draws `USDS` out of the `AllocatorVault` and into the `AllocatorBuffer`, creating debt. A malicious actor might draw excessive debt, although each vault has a maximal debt factor.                                                                                                                                                                         | ALMProxy, SubProxy ("Spark Proxy"), AllocatorRoles(no additional permisions) |
| AllocatorVault                | wipe                           | Returns `USDS` from the `AllocatorBuffer` to the `AllocatorVault` and wipes out the debt.                                                                                                                                                                                                                                                                   | ALMProxy, SubProxy ("Spark Proxy"), AllocatorRoles(no additional permisions) |
| MainnetController             | grantRole                      | Grants a specific role within the contract to an address. The roles may be _Admin_, _Freezer_, and _Relayer_. The _Freezer_ can freeze the contract at any time if it detects malicious actions and is currently a multisig, and _Relayers_ can move liquidity within rate limits. This is a critical role but is assumed to malicious in the threat model. | SubProxy ("Spark Proxy")                                                     |
| MainnetController             | revokeRole                     | Revokes an address' role in the contract, ensuring the address no longer bears the roles' capabilities. This can be used to change the _Freezer_, the _Admin_, or add/replace a _Relayer_. Granting malicious address one of those roles could be critical for the security of the Spark's liquidity.                                                       | SubProxy ("Spark Proxy")                                                     |
| MainnetController             | setMintRecipient               | Sets the token recipient of a destination chain when bridging USDC with the CCTP (Cricle's Cross-Chain Transfer Protocol). A malicious recipient can steal bridged funds.                                                                                                                                                                                   | SubProxy ("Spark Proxy")                                                     |
| MainnetController             | freeze                         | Freezes all functions that can move funds. This function is meant to be used in case of emergency or malicious behaviour from the _Relayer_. An abusive _Freezer_ could start a DOS on the protocol by freezeing the funds without a valid justification.                                                                                                   | Freezer                                                                      |
| MainnetController             | reactivate                     | Reactivates the frozen contract so that the _Relayer_ can move funds again.                                                                                                                                                                                                                                                                                 | SubProxy ("Spark Proxy")                                                     |
| MainnetController             | mintUSDS                       | Draws debt from the Sky protocol to mint USDS using the `AllocatorVault` and transfers the funds from the `AllocatorBuffer` to the `ALMProxy`. A malicious relayer could draw excessive debt, although there are limits set in the `RateLimits` contract. This                                                                                              | Relayer                                                                      |
| MainnetController             | burnUSDS                       | Returns USDS to the `AllocatorVault` USDS and wipes out the debt emitted by the Sky protocol, the amount burnt also cancels the corresponding minting limit from the `RateLimits` contract (such that more `USDS` can be minted).                                                                                                                           | Relayer                                                                      |
| MainnetController             | depositERC4626                 | Deposits a token (held in the `ALMProxy` contract) into an approved and rate limited ERC4626 vault.                                                                                                                                                                                                                                                         | Relayer                                                                      |
| MainnetController             | withdrawERC4626                | Withdraws a specific asset ammount from a vault to the `ALMProxy` (and burns corresponding shares). The relayer may withdraw all assets at once.                                                                                                                                                                                                            | Relayer                                                                      |
| MainnetController             | redeemERC4626                  | Burns a specific amount of vault shares and send the corresponding amount of assets to the `ALMProxy`. The relayer may redeem all shares at once.                                                                                                                                                                                                           | Relayer                                                                      |
| MainnetController             | depositAave                    | Deposits an asset (held in the `ALMProxy` contract) in an Aave pool in order to receive a specific amount of `AToken` (within rate limits) corresponding to that asset.                                                                                                                                                                                     | Relayer                                                                      |
| MainnetController             | withdrawAave                   | Withdraws assets from an aave pool and send the corresponding amount of assets to the `ALMProxy`. The relayer may withdraw all `ATokens` at once.                                                                                                                                                                                                           | Relayer                                                                      |
| MainnetController             | setDelegatedSigner             | Requires isActive, onlyRole modifiers                                                                                                                                                                                                                                                                                                                       | Role holder when active                                                      |
| MainnetController             | removeDelegatedSigner          | Requires isActive, onlyRole modifiers                                                                                                                                                                                                                                                                                                                       | Role holder when active                                                      |
| MainnetController             | prepareUSDeMint                | Requires isActive, onlyRole, rateLimited modifiers                                                                                                                                                                                                                                                                                                          | Role holder when active                                                      |
| MainnetController             | prepareUSDeBurn                | Requires isActive, onlyRole, rateLimited modifiers                                                                                                                                                                                                                                                                                                          | Role holder when active                                                      |
| MainnetController             | cooldownAssetsSUSDe            | Requires isActive, onlyRole, rateLimited modifiers                                                                                                                                                                                                                                                                                                          | Role holder when active                                                      |
| MainnetController             | cooldownSharesSUSDe            | Requires isActive, onlyRole modifiers                                                                                                                                                                                                                                                                                                                       | Role holder when active                                                      |
| MainnetController             | unstakeSUSDe                   | Requires isActive, onlyRole modifiers                                                                                                                                                                                                                                                                                                                       | Role holder when active                                                      |
| MainnetController             | swapUSDSToUSDC                 | Swaps `USDS` (held in the `ALMProxy` contract) to `USDC` using Sky's `LitePSM` without fees and within rate limits.                                                                                                                                                                                                                                         | Relayer                                                                      |
| MainnetController             | swapUSDCToUSDS                 | Swaps `USDC` (held in the `ALMProxy` contract) to `USDS` using Sky's `LitePSM` without fees and within rate limits. Note that new `USDS` will be minted, within the ceilings established by the Sky protocol, in order to fulfill the swap.                                                                                                                 | Relayer                                                                      |
| MainnetController             | transferUSDCToCCTP             | Triggers a cross-chain transfer of `USDC` (held in the `ALMProxy` contract) to an approved destination chain. Transfers have rate limits both in terms of total and destination-specific bridging. The recipient of the funds in the destination chain has to be predefined beforehand on a call to `setMintReceipient`.                                    | Relayer                                                                      |
| ALMProxy                      | grantRole                      | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ALMProxy                      | revokeRole                     | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ALMProxy                      | doCall                         | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| ALMProxy                      | doCallWithValue                | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| ALMProxy                      | doDelegateCall                 | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| RateLimits                    | grantRole                      | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| RateLimits                    | revokeRole                     | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| RateLimits                    | setRateLimitData               | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| RateLimits                    | setRateLimitData               | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| RateLimits                    | setUnlimitedRateLimitData      | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| RateLimits                    | triggerRateLimitDecrease       | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| RateLimits                    | triggerRateLimitIncrease       | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| AaveOracle                    | setAssetSources                | Requires onlyAssetListingOrPoolAdmins modifier                                                                                                                                                                                                                                                                                                              | Asset listing admin or Pool admin                                            |
| AaveOracle                    | setFallbackOracle              | Requires onlyAssetListingOrPoolAdmins modifier                                                                                                                                                                                                                                                                                                              | Asset listing admin or Pool admin                                            |
| AaveOracle                    | \_onlyAssetListingOrPoolAdmins | Internal function                                                                                                                                                                                                                                                                                                                                           | Asset listing admin or Pool admin                                            |
| ACLManager                    | grantRole                      | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | revokeRole                     | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | setRoleAdmin                   | Requires onlyRole modifier                                                                                                                                                                                                                                                                                                                                  | Role holder                                                                  |
| ACLManager                    | addPoolAdmin                   | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | removePoolAdmin                | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | addEmergencyAdmin              | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | removeEmergencyAdmin           | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | addRiskAdmin                   | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | removeRiskAdmin                | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | addFlashBorrower               | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | removeFlashBorrower            | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | addBridge                      | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | removeBridge                   | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | addAssetListingAdmin           | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| ACLManager                    | removeAssetListingAdmin        | Requires getRoleAdmin and onlyRole modifiers                                                                                                                                                                                                                                                                                                                | Role admin                                                                   |
| EmissionManager               | renounceOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| EmissionManager               | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| EmissionManager               | constructor                    | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| EmissionManager               | configureAssets                | No modifier but checks \_emissionAdmins                                                                                                                                                                                                                                                                                                                     | Emission admin for specified reward                                          |
| EmissionManager               | setTransferStrategy            | Requires onlyEmissionAdmin modifier                                                                                                                                                                                                                                                                                                                         | \_emissionAdmins[reward] == msg.sender                                       |
| EmissionManager               | setRewardOracle                | Requires onlyEmissionAdmin modifier                                                                                                                                                                                                                                                                                                                         | \_emissionAdmins[reward] == msg.sender                                       |
| EmissionManager               | setDistributionEnd             | Requires onlyEmissionAdmin modifier                                                                                                                                                                                                                                                                                                                         | \_emissionAdmins[reward] == msg.sender                                       |
| EmissionManager               | setEmissionPerSecond           | No modifier but checks \_emissionAdmins                                                                                                                                                                                                                                                                                                                     | Emission admin for specified reward                                          |
| EmissionManager               | setClaimer                     | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| EmissionManager               | setEmissionAdmin               | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| EmissionManager               | setRewardsController           | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| PoolAddressesProviderRegistry | renounceOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| PoolAddressesProviderRegistry | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| PoolAddressesProviderRegistry | constructor                    | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| PoolAddressesProviderRegistry | registerAddressesProvider      | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| PoolAddressesProviderRegistry | unregisterAddressesProvider    | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CollectorController           | renounceOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CollectorController           | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CollectorController           | constructor                    | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CollectorController           | approve                        | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CollectorController           | transfer                       | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| WrappedTokenGatewayV3         | renounceOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| WrappedTokenGatewayV3         | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| WrappedTokenGatewayV3         | constructor                    | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| WrappedTokenGatewayV3         | emergencyTokenTransfer         | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| WrappedTokenGatewayV3         | emergencyEtherTransfer         | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| WrappedTokenGatewayV3         | receive                        | No modifier but checks msg.sender                                                                                                                                                                                                                                                                                                                           | Only WETH contract                                                           |
| CapAutomator                  | renounceOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CapAutomator                  | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CapAutomator                  | setSupplyCapConfig             | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CapAutomator                  | setBorrowCapConfig             | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CapAutomator                  | removeSupplyCapConfig          | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| CapAutomator                  | removeBorrowCapConfig          | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| SparkLendFreezerMom           | setAuthority                   | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | owner (0x3300...8c4)                                                         |
| SparkLendFreezerMom           | setOwner                       | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | owner (0x3300...8c4)                                                         |
| SparkLendFreezerMom           | rely                           | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | owner (0x3300...8c4)                                                         |
| SparkLendFreezerMom           | deny                           | Requires auth modifier                                                                                                                                                                                                                                                                                                                                      | Authority or owner or wards                                                  |
| SparkLendFreezerMom           | freezeAllMarkets               | Requires auth modifier                                                                                                                                                                                                                                                                                                                                      | Authority or owner or wards                                                  |
| SparkLendFreezerMom           | freezeMarket                   | Requires auth modifier                                                                                                                                                                                                                                                                                                                                      | Authority or owner or wards                                                  |
| SparkLendFreezerMom           | pauseAllMarkets                | Requires auth modifier                                                                                                                                                                                                                                                                                                                                      | Authority or owner or wards                                                  |
| SparkLendFreezerMom           | pauseMarket                    | Requires auth modifier                                                                                                                                                                                                                                                                                                                                      | Authority or owner or wards                                                  |
| KillSwitchOracle              | renounceOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| KillSwitchOracle              | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| KillSwitchOracle              | setOracle                      | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| KillSwitchOracle              | disableOracle                  | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| KillSwitchOracle              | reset                          | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | \_owner (0x3300...8c4)                                                       |
| AToken                        | setIncentivesController        | Requires onlyPoolAdmin modifier                                                                                                                                                                                                                                                                                                                             | Pool Admin via ACL Manager                                                   |
| AToken                        | initialize                     | Requires initializer modifier                                                                                                                                                                                                                                                                                                                               | During initialization                                                        |
| AToken                        | mint                           | Requires onlyPool modifier                                                                                                                                                                                                                                                                                                                                  | POOL contract                                                                |
| AToken                        | burn                           | Requires onlyPool modifier                                                                                                                                                                                                                                                                                                                                  | POOL contract                                                                |
| AToken                        | mintToTreasury                 | Requires onlyPool modifier                                                                                                                                                                                                                                                                                                                                  | POOL contract                                                                |
| AToken                        | transferOnLiquidation          | Requires onlyPool modifier                                                                                                                                                                                                                                                                                                                                  | POOL contract                                                                |
| AToken                        | transferUnderlyingTo           | Requires onlyPool modifier                                                                                                                                                                                                                                                                                                                                  | POOL contract                                                                |
| AToken                        | handleRepayment                | Requires onlyPool modifier                                                                                                                                                                                                                                                                                                                                  | POOL contract                                                                |
| AToken                        | rescueTokens                   | Requires onlyPoolAdmin modifier                                                                                                                                                                                                                                                                                                                             | Pool Admin via ACL Manager                                                   |
| ProxyAdmin                    | renounceOwnership              | Renounce ownership of the contract. This makes all upgradeable contracts that have this contract as admin immutable.                                                                                                                                                                                                                                        | SubProxy ("Spark Proxy")                                                     |
| ProxyAdmin                    | transferOwnership              | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | SubProxy ("Spark Proxy")                                                     |
| ProxyAdmin                    | changeProxyAdmin               | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | SubProxy ("Spark Proxy")                                                     |
| ProxyAdmin                    | upgrade                        | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | SubProxy ("Spark Proxy")                                                     |
| ProxyAdmin                    | upgradeAndCall                 | Requires onlyOwner modifier                                                                                                                                                                                                                                                                                                                                 | SubProxy ("Spark Proxy")                                                     |
| BorrowLogic                   | executeRepay                   | Checks non-zero amount or self-repayment                                                                                                                                                                                                                                                                                                                    | User themselves or explicit amount                                           |
| BorrowLogic                   | executeSwapBorrowRateMode      | Checks collateral conditions                                                                                                                                                                                                                                                                                                                                | Anyone meeting collateral criteria                                           |
| BridgeLogic                   | executeMintUnbacked            | Checks not ISOLATED_COLLATERAL_SUPPLIER_ROLE                                                                                                                                                                                                                                                                                                                | Anyone not in isolated role                                                  |
| FlashLoanLogic                | executeFlashLoan               | Verifies receiver execution                                                                                                                                                                                                                                                                                                                                 | Flash loan receiver                                                          |
| FlashLoanLogic                | executeFlashLoanSimple         | Verifies receiver execution                                                                                                                                                                                                                                                                                                                                 | Flash loan receiver                                                          |
| LiquidationLogic              | executeLiquidationCall         | Checks not ISOLATED_COLLATERAL_SUPPLIER_ROLE                                                                                                                                                                                                                                                                                                                | Anyone not in isolated role                                                  |
| LiquidationLogic              | \_liquidateATokens             | Checks not ISOLATED_COLLATERAL_SUPPLIER_ROLE                                                                                                                                                                                                                                                                                                                | Anyone not in isolated role                                                  |
| SupplyLogic                   | executeSupply                  | Checks not ISOLATED_COLLATERAL_SUPPLIER_ROLE                                                                                                                                                                                                                                                                                                                | Anyone not in isolated role                                                  |
| SupplyLogic                   | executeFinalizeTransfer        | Checks not ISOLATED_COLLATERAL_SUPPLIER_ROLE                                                                                                                                                                                                                                                                                                                | Anyone not in isolated role                                                  |
| WalletBalanceProvider         | receive                        | Checks msg.sender is contract                                                                                                                                                                                                                                                                                                                               | Only contract callers                                                        |

## Dependencies

insert text

## Exit Window

insert text

# Security Council

See http://defiscan.info/learn-more#security-council-requirements for guidance.

change  or  accordingly

|  / | Requirement                                             |
| ------ | ------------------------------------------------------- |
|      | At least 7 signers                                      |
|      | At least 51% threshold                                  |
|      | At least 50% non-team signers                           |
|      | Signers are publicly announced (with name or pseudonym) |
